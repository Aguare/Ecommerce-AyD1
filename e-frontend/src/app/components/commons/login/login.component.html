<div *ngIf="!isModalVisible" class="login-container">
  <div class="logo-container">
    <img [src]="logoUrl" alt="Logo" class="logo" />
  </div>
  <div  class="box is-large">
    <h1 class="title is-4 has-text-centered">Iniciar Sesión</h1>
    <form [formGroup]="loginForm" (ngSubmit)="onSubmit()">
      <div class="field">
        <label class="label">Usuario o Correo</label>
        <div class="control">
          <input class="input" type="text" formControlName="usernameOrEmail" placeholder="Usuario o Correo" required>
        </div>
        <p class="help is-danger" *ngIf="loginForm.get('usernameOrEmail')?.hasError('required')">
          Este campo es requerido
        </p>
      </div>
  
      <div class="field">
        <label class="label">Contraseña</label>
        <div class="control has-icons-right">
          <input class="input" [type]="hide ? 'password' : 'text'" formControlName="password" placeholder="Contraseña" required>
          <mat-icon class="password-toggle-icon" (click)="hide = !hide" style="cursor: pointer; position: absolute; right: 10px; top: 50%; transform: translateY(-50%);">
            {{ hide ? 'visibility_off' : 'visibility' }}
            <span class="tooltip">Ver</span>
          </mat-icon>
        </div>
        <p class="help is-danger" *ngIf="passwordHasErrorRequired">
          Este campo es requerido
        </p>
      </div>      
  
      <div class="field">
        <div class="control">
          <button class="button is-primary is-fullwidth" type="submit" [disabled]="loginForm.invalid">Iniciar Sesión
          <mat-progress-spinner *ngIf="isLoading" [diameter]="20" mode="indeterminate" style="margin-left: 10px;"></mat-progress-spinner>
        </button>
        </div>
      </div>
    </form>
  
    <div class="has-text-centered">
      <p class="mt-4">¿No tienes una cuenta? 
        <a href="javascript:void(0)" (click)="openRegisterModal()">Registrarse</a>
      </p>
    </div>
    <div class="has-text-centered">
      <p class="mt-4">¿Olvidaste tu contraseña? 
        <a href="javascript:void(0)" (click)="forgotPassword()">¡Recuperar!</a>
      </p>
    </div>
  </div>
</div>

<div *ngIf="isModalVisible"  class="register-container">
  <div class="box is-large">
    <!-- Modal de Registro -->
    <app-modal [title]="'Cerrar'" (closeModal)="closeRegisterModal()">
      <div class="modal-card">
        <header class="modal-card-head">
          <h1 class="title is-4 has-text-centered">{{ registerModalTitle }}</h1>
          <button class="delete" aria-label="close" (click)="closeRegisterModal()"></button>
        </header>
        <section class="modal-card-body">
          <!-- Formulario de Registro -->
          <form [formGroup]="registerForm" (ngSubmit)="onRegister()">
            <div class="columns">
              <div class="column">
                <div class="field">
                  <label class="label">Nombre</label>
                  <div class="control">
                    <input class="input" type="text" formControlName="name" placeholder="Nombre" required>
                  </div>
                </div>
              </div>
              <div class="column">
                <div class="field">
                  <label class="label">Apellido</label>
                  <div class="control">
                    <input class="input" type="text" formControlName="lastName" placeholder="Apellido" required>
                  </div>
                </div>
              </div>
            </div>
            <div class="columns">
              <div class="column">
                <div class="field">
                  <label class="label">Correo Electrónico</label>
                  <div class="control">
                    <input class="input" type="email" formControlName="email" placeholder="Correo Electrónico" required>
                  </div>
                </div>
              </div>
              <div class="column">
                <div class="field">
                  <label class="label">Contraseña</label>
                  <div class="control has-icons-right">
                    <input class="input" [type]="hide ? 'password' : 'text'" formControlName="password" placeholder="Contraseña" required>
                    <mat-icon class="password-toggle-icon" (click)="hide = !hide" style="cursor: pointer; position: absolute; right: 10px; top: 50%; transform: translateY(-50%); cursor: pointer;">
                      {{ hide ? 'visibility_off' : 'visibility' }}
                      <span class="tooltip">Ver</span>
                    </mat-icon>
                  </div>
                </div>
              </div>
            </div>
            <div class="field">
              <div class="control">
                <button class="button is-primary is-fullwidth" type="submit" [disabled]="registerForm.invalid || isLoading">
                  <span>Registrarse</span>
                  <mat-progress-spinner *ngIf="isLoading" [diameter]="20" mode="indeterminate" style="margin-left: 10px;"></mat-progress-spinner>
                </button>
              </div>
            </div>
          </form>
        </section>
      </div>
    </app-modal>
  </div>  
</div>




